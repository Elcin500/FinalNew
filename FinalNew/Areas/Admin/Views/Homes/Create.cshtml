@model FinalHomeSale.Models.Entity.Home

@{
    ViewData["Title"] = "Create";
}

@section style{ 
    <link href="~/assets/css/imager.css" rel="stylesheet" />

    <style>
        #deleteImg{
            font-size:25px;
            color:red;
            position:absolute;
        }
    </style>
}

<div class="content">
    <ul class="breadcrumb">
        <li>
            <p>YOU ARE HERE</p>
        </li>
        <li><a asp-action="Index" class="active">Homes</a> </li>
    </ul>
    <div class="page-title">
        <i class="icon-custom-left"></i>
        <h3><a asp-action="Index">Homes</a> - <span class="semi-bold">Yenisini Yarat</span></h3>
    </div>
    <div class="row" id="inbox-wrapper">
        <div class="col-md-12">
            <div class="grid simple">
                <div class="grid-body no-border email-body">
                    <br>
                    <div class="row-fluid">
                        <div class="col-md-12">
                            <form asp-action="Create" enctype="multipart/form-data" method="post"  class="row">
                                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                                <div class="col-sm-8">
                                    <div class="row">
                                        <div class="form-group col-lg-6">
                                            <label asp-for="Address" class="control-label"></label>
                                            <input asp-for="Address" class="form-control" />
                                            <span asp-validation-for="Address" class="text-danger"></span>
                                        </div>
                                        <div class="form-group col-lg-6">
                                            <label asp-for="AnnounceType" class="control-label"></label>
                                            <input asp-for="AnnounceType" class="form-control" />
                                            <span asp-validation-for="AnnounceType" class="text-danger"></span>
                                        </div>
                                        <div class="form-group col-lg-6">
                                            <label asp-for="Period" class="control-label"></label>
                                            <input asp-for="Period" class="form-control" />
                                            <span asp-validation-for="Period" class="text-danger"></span>
                                        </div>
                                        <div class="form-group col-lg-6">
                                            <label asp-for="CategoryId" class="control-label"></label>
                                            <select asp-for="CategoryId" class="form-control" asp-items="ViewBag.CategoryId"></select>
                                        </div>
                                        <div class="form-group col-lg-6">
                                            <label asp-for="CityId" class="control-label"></label>
                                            <select asp-for="CityId" class="form-control" asp-items="ViewBag.CityId"></select>
                                        </div>
                                        <div class="form-group col-lg-6">
                                            <label asp-for="MetroId" class="control-label"></label>
                                            <select asp-for="MetroId" class="form-control" asp-items="ViewBag.MetroId"></select>
                                        </div>
                                        <div class="form-group col-lg-6">
                                            <label asp-for="AgentId" class="control-label"></label>
                                            <select asp-for="AgentId" class="form-control" asp-items="ViewBag.AgentId"></select>
                                        </div>
                                        <div class="form-group col-lg-6">
                                            <label asp-for="Price" class="control-label"></label>
                                            <input asp-for="Price" class="form-control" />
                                            <span asp-validation-for="Price" class="text-danger"></span>
                                        </div>
                                        <div class="form-group col-lg-6">
                                            <label asp-for="Area" class="control-label"></label>
                                            <input asp-for="Area" class="form-control" />
                                            <span asp-validation-for="Area" class="text-danger"></span>
                                        </div>
                                        <div class="form-group col-lg-6">
                                            <label asp-for="LandArea" class="control-label"></label>
                                            <input asp-for="LandArea" class="form-control" />
                                            <span asp-validation-for="LandArea" class="text-danger"></span>
                                        </div>
                                        <div class="form-group col-lg-6">
                                            <label asp-for="RoomCount" class="control-label"></label>
                                            <input asp-for="RoomCount" class="form-control" />
                                            <span asp-validation-for="RoomCount" class="text-danger"></span>
                                        </div>
                                        <div class="form-group col-lg-6">
                                            <label asp-for="BathCount" class="control-label"></label>
                                            <input asp-for="BathCount" class="form-control" />
                                            <span asp-validation-for="BathCount" class="text-danger"></span>
                                        </div>
                                        <div class="form-group col-lg-6">
                                            <label asp-for="GarageCount" class="control-label"></label>
                                            <input asp-for="GarageCount" class="form-control" />
                                            <span asp-validation-for="GarageCount" class="text-danger"></span>
                                        </div>
                                        <div class="form-group col-lg-6">
                                            <label asp-for="SellerName" class="control-label"></label>
                                            <input asp-for="SellerName" class="form-control" />
                                            <span asp-validation-for="SellerName" class="text-danger"></span>
                                        </div>
                                        <div class="form-group col-lg-6">
                                            <label asp-for="Phone" class="control-label"></label>
                                            <input asp-for="Phone" class="form-control" />
                                            <span asp-validation-for="Phone" class="text-danger"></span>
                                        </div>
                                        <div class="form-group col-lg-6">
                                            <label asp-for="Comment" class="control-label"></label>
                                            <input asp-for="Comment" class="form-control" />
                                            <span asp-validation-for="Comment" class="text-danger"></span>
                                        </div>
                                        <div class="form-group col-lg-12">
                                            <label asp-for="Map" class="control-label"></label>
                                            <input asp-for="Map" class="form-control" />
                                            <span asp-validation-for="Map" class="text-danger"></span>
                                        </div>
                                        <div class="form-group col-lg-12">
                                            <label asp-for="Description" class="control-label"></label>
                                            <textarea asp-for="Description" class="form-control" rows="4"></textarea>
                                            <span asp-validation-for="Description" class="text-danger"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="imager-container" id="viewer1" name="file">
                                        <div class="viewer no-show" style="width:300px;height:300px"></div>
                                        <div class="viewer-thumbs" name="image"></div>
                                    </div>
                                </div>
                                <div class="form-group col-sm-12">
                                    <input type="submit" id="addHome" value="Create" class="btn btn-default" />
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</div>




@section scripts{
    <script src="~/assets/js/imager.js"></script>
    <script>

        $('#addHome').click(function (e) {

            let labels = $('.viewer-thumbs label');

            

            if (labels.length ==1) {
                if ($(labels).css('background-image') == "https://localhost:44309/assets/img/img-rendering.gif" ) {
                    $(labels).remove();
                    //console.log('1de');
                }
            }

            if (labels.length > 1) {
                for (var i = 0; i < labels.length; i++) {
                    let element = labels[i];
                    if ($(element).css('background-image') == "https://localhost:44309/assets/img/img-rendering.gif" || $(element).css('background-image') == "assets/img/img-rendering.gif") {
                        element.remove();
                        //console.log('2de')

                    }
                }

            }

            if (!$('.viewer-thumbs label').length > 0 || $('.viewer-thumbs label') == null) {
                e.preventDefault();
                alert("Sekil daxil edin");
                return;
            }

            

        });


        function deleteImg(e) {
            e.preventDefault();
            e.stopPropagation();


            let labelimg = $(e.currentTarget.parentElement).css('background-image');
            let viewerimg = $('.viewer').css('background-image');
            let labelsfirst = $('.viewer-thumbs label');

            if (labelsfirst.length == 1) {
                e.currentTarget.parentElement.remove();
                $('.viewer').addClass('no-show');
                $('.viewer').css('background-image', "none");
                $('.viewer-thumbs input').remove();

            }
            else {
                e.currentTarget.parentElement.remove();
                //if (labelimg == viewerimg) {
                //    $('.viewer').css('background-image', "none");
                //}
                let labelssecond = $('.viewer-thumbs label');


                if (labelimg == viewerimg) {

                    if (labelssecond.length == 0) {
                        $('.viewer').addClass('no-show');
                        $('.viewer').css('background-image', "none");

                    }

                    if (labelssecond.length == 1) {
                        $(labelssecond).trigger('click');
                        console.log('==1');
                    }

                    if (labelssecond.length > 1) {
                        $(labelssecond[0]).trigger('click');
                        console.log('>1');

                    }
                }
            }




        }

        $('#viewer1').imgadd({
            tnWidth: '120px',
            tnHeight: '120px',
            fontSize: '55px',
            plusInnerHtml: '',
            plusBtnClass: undefined
        });




    </script>

}